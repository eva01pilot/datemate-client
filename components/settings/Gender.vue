<template>
  <div class="flex flex-col">
    <CommonHeading lvl="2">Ğ’Ğ°Ñˆ Ğ³ĞµĞ½Ğ´ĞµÑ€</CommonHeading>
    <div class="flex flex-col md:flex-row gap-5">
      <CommonChip @click="actions.setGender(0)" class="bg-surface-0 w-full md:w-[146px]"
        :is-active="getters.getGender() === 0">
        ğŸ‘¨ğŸ»â€ğŸ¦° ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°
      </CommonChip>
      <CommonChip @click="actions.setGender(1)" class="bg-surface-0 w-full md:w-[146px]"
        :is-active="getters.getGender() === 1">
        ğŸ‘±ğŸ»â€â™€ï¸ Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°
      </CommonChip>
      <CommonChip @click="actions.setGender(2)" class="bg-surface-0 w-full md:w-[146px]"
        :is-active="getters.getGender() === 2">
        ğŸŒš Ğ”Ñ€ÑƒĞ³Ğ¾Ğ¹
      </CommonChip>
    </div>
  </div>
  <div class="flex flex-col">
    <CommonHeading lvl="2">ĞšĞ¾Ğ³Ğ¾ Ğ²Ñ‹ Ğ¸Ñ‰ĞµÑ‚Ğµ</CommonHeading>
    <div class="flex flex-col md:flex-row gap-5">
      <CommonChip @click="handleTargetGender(0)" class="bg-surface-0 w-full md:w-[146px]" :is-active="isActive(0)">
        <span class="flex flex-row items-center">
          ğŸ‘¨ğŸ»â€ğŸ¦° ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½
          <IconsDelete v-if="isActive(0)" />
          <IconsAdd v-else />
        </span>
      </CommonChip>
      <CommonChip @click="handleTargetGender(1)" class="bg-surface-0 w-full md:w-[146px]" :is-active="isActive(1)">
        <span class="flex flex-row items-center">
          ğŸ‘±ğŸ»â€â™€ï¸ Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½
          <IconsDelete v-if="isActive(1)" />
          <IconsAdd v-else />
        </span>
      </CommonChip>
      <CommonChip @click="handleTargetGender(2)" class="bg-surface-0 w-full md:w-[146px]" :is-active="isActive(2)">
        <span class="flex flex-row items-center">
          ğŸŒš Ğ”Ñ€ÑƒĞ³Ğ¸Ñ…
          <IconsDelete v-if="isActive(2)" />
          <IconsAdd v-else />
        </span>
      </CommonChip>
    </div>
  </div>
</template>

<script setup lang="ts">
import { useUserSettingsStore } from '~/store/user-settings';

const getters = useUserSettingsStore().getters
const actions = useUserSettingsStore().actions

const isActive = (gender: 0 | 1 | 2) => {
  return getters.getTargetGenders()?.has(gender)
}

const handleTargetGender = (gender: 0 | 1 | 2) => {
  if (isActive(gender)) {
    actions.removeTargetGender(gender)
  } else {
    actions.addTargetGender(gender)
  }
}
</script>
